{% extends 'base.html' %}

{% block title %}
Register
{% endblock %}

{% block body %}
    <main>
        <div class="container">
            <h2 class="text-center">Register</h2>
            <form action="{{ url_for('register') }}" method="POST">
                <div class="row">
                    <div class="col-md-6 offset-md-3 text-center">
                        <div class="form-group">
                            <label for="full_name">Full Name</label>
                            <input type="text" name="full_name" id="full_name" class="form-control" required>
                        </div>
                        <div class="form-group">
                            <label for="username">Username</label>
                            <input type="text" name="username" id="username" class="form-control" required>
                        </div>
                        <div class="form-group">
                            <label for="email">Email</label>
                            <input type="email" name="email" id="email" class="form-control" required>
                        </div>
                        <div class="form-group">
                            <label for="password">Password</label>
                            <input type="password" name="password" id="password" class="form-control" required>
                        </div>
                        <div class="form-group">
                            <label for="re_password">Re-type Password</label>
                            <input type="password" name="re_password" id="re_password" class="form-control" required>
                            <div class="password-warning" id="password_warning"></div>
                        </div>
                        <input type="submit" value="Submit" class="btn btn-primary btn-lg" id="submit">
                    </div>
                </div>
            </form>
        </div>
    </main>

    <script>
        var form = document.querySelector("form");
        var full_name = document.querySelector("#full_name");
        var username = document.querySelector("#username");
        var email = document.querySelector("#email");
        var password = document.querySelector("#password");
        var re_password = document.querySelector("#re_password");
        var submit = document.querySelector("#submit");
        var password_warning = document.querySelector("#password_warning");
        var passwords_match = false;

        re_password.addEventListener("keyup", function() {
            passwords_match = matchingPasswordCheck();
            if (passwords_match == true){

            } else {
                submit.preventDefault();
            }
        });

        password.addEventListener("keyup", function() {
            passwords_match = matchingPasswordCheck();
        });

        function matchingPasswordCheck(){
            if (re_password.value != password.value){
                password_warning.innerHTML = "Passwords don't match";
                return false;
            } else {
                password_warning.innerHTML = "";
                return true;
            }
        }

    </script>
{% endblock %}